<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Server Management - {{ server.name }}</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
  <style>
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    /* Layout */
    .layout {
      display: flex;
      min-height: 100vh;
    }
    .main-content {
      flex: 1;
      padding: 24px;
      background: var(--bg-dark);
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container">
      <div class="flex" style="align-items: center; gap: 16px;">
        <a href="/" class="logo">SSupport</a>
        <span style="color: var(--text-muted);">•</span>
        <span style="color: var(--text-secondary);">{{ server.name }}</span>
        <span class="badge" style="background: rgba(16, 185, 129, 0.2); color: rgb(16, 185, 129);">
          {{ server.member_count }} members
        </span>
      </div>
      <div class="flex" style="align-items: center; gap: 16px;">
        <span style="color: var(--text-secondary);">{{ username }}</span>
        <a href="{{ url_for('logout') }}" class="btn" style="background: var(--danger); color: white;">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
          Logout
        </a>
      </div>
    </div>
  </nav>

  <div class="container" style="padding-top: 24px; padding-bottom: 24px;">
    <!-- Server Header -->
    <div class="server-header card" style="margin-bottom: 24px;">
      <div class="flex items-center gap-4">
        <img src="{{ server.icon_url }}" alt="{{ server.name }} icon" class="w-16 h-16 rounded-full">
        <div>
          <h1 class="text-2xl font-bold">{{ server.name }}</h1>
          <p class="text-gray-400">{{ server.member_count }} members • {{ server.channel_count }} channels</p>
        </div>
      </div>
    </div>
    <div class="grid" style="grid-template-columns: 1fr 3fr; gap: 24px;">
      <!-- Sidebar -->
      <aside>
        <div class="card" style="position: sticky; top: 24px;">
          <div style="text-align: center; margin-bottom: 24px;">
            <h3 style="font-weight: 600; font-size: 20px; margin-bottom: 4px;">{{ server.name }}</h3>
            <p style="color: var(--text-muted); font-size: 14px;">Server Dashboard</p>
          </div>
          
          <nav class="sidebar">
            <button class="nav-button active" data-tab="overview">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg>
              Overview
            </button>
            <button class="nav-button" data-tab="moderation">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
              Moderation
            </button>
            <button class="nav-button" data-tab="tickets">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path></svg>
              Tickets
            </button>
            <button class="nav-button" data-tab="welcome">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
              Welcome
            </button>
            <button class="nav-button" data-tab="warnings">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
              Warnings
            </button>
          </nav>
          
          <div style="margin-top: 32px; display: flex; flex-direction: column; gap: 12px;">
            <a href="{{ url_for('servers') }}" class="btn" style="background: var(--bg-card-hover); display: flex; align-items: center; justify-content: center;">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>
              Back to Servers
            </a>
            <a href="https://discord.gg/ssupport" target="_blank" class="btn" style="display: flex; align-items: center; justify-content: center;">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
              Support Server
            </a>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main>
        <!-- Boot data for script.js -->
        <script>
          window.currentServerId = {{ server.id|tojson }};
          window.initialSettings = {{ settings|tojson }};
          window.warnedUsers = {{ warned_users|tojson }};
          window.username = {{ username|tojson|safe }};
        </script>

        <!-- Overview Tab -->
        <section id="overview-tab" class="tab-content">
          <div class="card">
            <div class="flex justify-between items-center mb-6">
              <div class="flex items-center gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg>
                <h2 style="font-size: 24px; font-weight: 700; color: var(--text-primary);">Server Overview</h2>
              </div>
              <div class="flex gap-3">
                <button id="preview-panel" class="btn btn-secondary">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                  Preview Panel
                </button>
                <button id="refresh-overview" class="btn btn-secondary">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"></path></svg>
                  Refresh
                </button>
              </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
              <!-- Server Stats -->
              <div class="card" style="margin: 0;">
                <div class="flex items-center gap-3 mb-4">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path></svg>
                  <h3 style="font-size: 18px; font-weight: 600; color: var(--primary);">Server Statistics</h3>
                </div>
                
                <div style="display: flex; flex-direction: column; gap: 12px;">
                  <div class="flex justify-between items-center">
                    <span style="color: var(--text-secondary);">Name</span>
                    <span style="color: var(--text-primary); font-weight: 500;">{{ server.name }}</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span style="color: var(--text-secondary);">Members</span>
                    <span class="badge">{{ server.member_count }}</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span style="color: var(--text-secondary);">Last Updated</span>
                    <span style="color: var(--text-primary); font-size: 14px;">{{ now }}</span>
                  </div>
                </div>
                
                <!-- Bot Status Information -->
                <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border-color);">
                  <div class="flex items-center gap-3 mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--secondary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10H12V2zM12 2a10 10 0 1 1-10 10h10V2z"></path><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg>
                    <h4 style="font-size: 16px; font-weight: 600; color: var(--secondary);">Bot Status</h4>
                  </div>
                  
                  <div id="bot-status" style="display: flex; flex-direction: column; gap: 12px;">
                    <div class="flex justify-between items-center">
                      <span style="color: var(--text-secondary);">Status</span>
                      <span id="bot-online-status" style="color: var(--secondary); font-weight: 500;">Loading...</span>
                    </div>
                    <div class="flex justify-between items-center">
                      <span style="color: var(--text-secondary);">Uptime</span>
                      <span id="bot-uptime" style="color: var(--text-primary); font-size: 14px;">Loading...</span>
                    </div>
                    <div class="flex justify-between items-center">
                      <span style="color: var(--text-secondary);">Commands</span>
                      <span id="bot-commands" style="color: var(--text-primary); font-size: 14px;">Loading...</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Quick Actions -->
              <div class="card" style="margin: 0;">
                <div class="flex items-center gap-3 mb-4">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--secondary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>
                  <h3 style="font-size: 18px; font-weight: 600; color: var(--secondary);">Quick Actions</h3>
                </div>
                
                <p style="color: var(--text-secondary); margin-bottom: 16px;">Use the sidebar tabs to:</p>
                <div style="display: flex; flex-direction: column; gap: 12px;">
                  <div class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                    <span style="color: var(--text-secondary);">Configure moderation settings</span>
                  </div>
                  <div class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path></svg>
                    <span style="color: var(--text-secondary);">Manage ticket systems</span>
                  </div>
                  <div class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    <span style="color: var(--text-secondary);">Set up welcome messages</span>
                  </div>
                  <div class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                    <span style="color: var(--text-secondary);">Review user warnings</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Moderation Tab -->
        <section id="moderation" class="tab-content">
          <div class="card">
            <div class="flex items-center gap-2 mb-4">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
              <h2 class="text-lg font-semibold">Blacklisted Words</h2>
            </div>
            <div class="space-y-4">
              <div class="flex gap-2">
                <input type="text" id="newWord" class="flex-1" placeholder="Add new word...">
                <button onclick="addWord()" class="btn btn-primary">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                  Add Word
                </button>
              </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <!-- Blacklisted Words -->
              <div class="bg-gray-800 bg-opacity-50 p-6 rounded-xl">
                <h3 class="text-xl font-semibold mb-4 text-red-400">🚫 Blacklisted Words</h3>
                <p class="text-sm text-gray-400 mb-4">Words that will be automatically deleted. Users get warned after 3 violations.</p>
                
                <div id="blacklist-container" class="space-y-3 mb-4 max-h-40 overflow-y-auto">
                  <!-- Dynamic inputs will be added here -->
                </div>
                
                <div class="flex gap-2">
                  <button id="add-blacklist-word" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-all text-sm">
                    ➕ Add Word
                  </button>
                  <button id="save-blacklist" class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-all text-sm">
                    💾 Save Blacklist
                  </button>
                </div>
              </div>

              <!-- Active Moderation -->
              <div class="bg-gray-800 bg-opacity-50 p-6 rounded-xl">
                <h3 class="text-xl font-semibold mb-4 text-orange-400">📋 Active Moderation</h3>
                
                <div class="space-y-4">
                  <div>
                    <h4 class="text-lg font-medium text-red-400 mb-2">🔨 Bans</h4>
                    <div id="bans-list" class="text-sm text-gray-300 max-h-32 overflow-y-auto">Loading...</div>
                  </div>
                  
                  <div>
                    <h4 class="text-lg font-medium text-yellow-400 mb-2">⏰ Timeouts</h4>
                    <div id="timeouts-list" class="text-sm text-gray-300 max-h-32 overflow-y-auto">Loading...</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Tickets Tab -->
        <section id="tickets" class="tab-content">
          <div class="space-y-6">
            <!-- Active Tickets -->
            <div class="card">
              <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-2">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path></svg>
                  <h2 class="text-lg font-semibold">Active Tickets</h2>
                </div>
                <button class="btn btn-secondary">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.5 2v6h-6M21.34 15.57a10 10 0 1 1-.57-8.38"/></svg>
                  Reload
                </button>
              </div>

            <!-- Active Tickets -->
            <div class="card" style="margin-bottom: 24px;">
              <div class="flex items-center gap-3 mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.5 12H16c-.7 2-2 3-4 3s-3.3-1-4-3H2.5"/><path d="M5.5 5.1L2 12v6c0 1.1.9 2 2 2h16a2 2 0 002-2v-6l-3.4-6.9A2 2 0 0016.8 4H7.2a2 2 0 00-1.7 1.1z"/></svg>
                <h3 style="font-size: 18px; font-weight: 600; color: var(--primary);">Active Tickets</h3>
              </div>
              <div id="active-tickets" style="display: flex; flex-direction: column; gap: 16px; min-height: 60px;">
                <!-- Active tickets will be loaded here -->
                <div style="text-align: center; color: var(--text-muted);">Loading tickets...</div>
              </div>
            </div>

            <!-- Closed Tickets -->
            <div class="card">
              <div class="flex items-center gap-3 mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--secondary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.5 12H16c-.7 2-2 3-4 3s-3.3-1-4-3H2.5"/><path d="M5.5 5.1L2 12v6c0 1.1.9 2 2 2h16a2 2 0 002-2v-6l-3.4-6.9A2 2 0 0016.8 4H7.2a2 2 0 00-1.7 1.1z"/><line x1="9" y1="12" x2="15" y2="12"/></svg>
                <h3 style="font-size: 18px; font-weight: 600; color: var(--secondary);">Closed Tickets</h3>
              </div>
              <div id="closed-tickets" style="display: flex; flex-direction: column; gap: 16px; min-height: 60px;">
                <!-- Closed tickets will be loaded here -->
                <div style="text-align: center; color: var(--text-muted);">Loading tickets...</div>
              </div>
            </div>
          </div>
        </section>

        <!-- Welcome Tab -->
        <section id="welcome" class="tab-content">
          <div class="card">
            <div class="flex items-center gap-2 mb-4">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
              <h2 class="text-lg font-semibold">Welcome Message</h2>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <!-- Welcome Settings -->
              <div class="bg-gray-800 bg-opacity-50 p-6 rounded-xl">
                <h3 class="text-xl font-semibold mb-4 text-blue-400">👋 Welcome Settings</h3>
                
                <div class="space-y-4">
                  <div>
                    <label class="block text-gray-300 mb-2">Welcome Channel</label>
                    <select id="welcome_channel" class="dropdown-scrollable w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:border-indigo-400 transition-all">
                      <option value="">No channel</option>
                    </select>
                  </div>
                  
                  <div>
                    <label class="block text-gray-300 mb-2">Welcome Message</label>
                    <textarea id="welcome_message" class="w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:border-indigo-400 transition-all" rows="3" placeholder="Welcome {ping} to {server_name}! We now have {members} members."></textarea>
                    <div class="mt-2 text-sm text-gray-400">
                      <strong>Available placeholders:</strong>
                      <div class="flex flex-wrap gap-2 mt-1">
                        <code class="bg-gray-700 px-2 py-1 rounded">{ping}</code>
                        <code class="bg-gray-700 px-2 py-1 rounded">{server_name}</code>
                        <code class="bg-gray-700 px-2 py-1 rounded">{members}</code>
                        <code class="bg-gray-700 px-2 py-1 rounded">{user}</code>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Auto Role Settings -->
              <div class="bg-gray-800 bg-opacity-50 p-6 rounded-xl">
                <h3 class="text-xl font-semibold mb-4 text-purple-400">🎭 Auto Role</h3>
                
                <div class="space-y-4">
                  <div>
                    <label class="block text-gray-300 mb-2">Auto role for new members</label>
                    <select id="join_role" class="dropdown-scrollable w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:border-indigo-400 transition-all">
                      <option value="">No role</option>
                    </select>
                  </div>
                  
                  <div class="flex items-center justify-between pt-4">
                    <button id="save-settings" class="px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-all font-semibold">
                      💾 Save All Settings
                    </button>
                    <span id="save-status" class="text-sm text-gray-300"></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Warnings Tab -->
        <section id="warnings" class="tab-content">
          <div class="card">
            <div class="flex justify-between items-center mb-6">
              <div class="flex items-center gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                <h2 style="font-size: 24px; font-weight: 700; color: var(--text-primary);">Warnings</h2>
              </div>
              <button class="btn btn-secondary">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.5 2v6h-6M21.34 15.57a10 10 0 1 1-.57-8.38"/></svg>
                Reload
              </button>
            </div>

            <!-- Active Warnings -->
            <div class="card" style="margin-bottom: 24px;">
              <div class="flex items-center gap-3 mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--warning)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                <h3 style="font-size: 18px; font-weight: 600; color: var(--warning);">Active Warnings</h3>
              </div>
              <div id="active-warnings" style="display: flex; flex-direction: column; gap: 16px; min-height: 60px;">
                <!-- Active warnings will be loaded here -->
                <div style="text-align: center; color: var(--text-muted);">Loading warnings...</div>
              </div>
            </div>

            <!-- Expired Warnings -->
            <div class="card">
              <div class="flex items-center gap-3 mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                <h3 style="font-size: 18px; font-weight: 600; color: var(--success);">Expired Warnings</h3>
              </div>
              <div id="expired-warnings" style="display: flex; flex-direction: column; gap: 16px; min-height: 60px;">
                <!-- Expired warnings will be loaded here -->
                <div style="text-align: center; color: var(--text-muted);">Loading warnings...</div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Ticket Panel Preview Modal -->
  <div id="panel-preview" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center z-50">
    <div class="glass-effect rounded-2xl p-8 max-w-2xl w-full mx-4">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-bold text-white">🎫 Ticket Panel Preview</h3>
        <button id="close-preview" class="text-gray-400 hover:text-white transition-all text-2xl">&times;</button>
      </div>
      <div id="panel-preview-body" class="bg-gray-900 p-6 rounded-xl text-gray-200 border border-gray-700">
        <!-- Preview content will be inserted here -->
      </div>
      <div class="mt-6 flex justify-end">
        <button id="close-preview-btn" class="px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-all">
          Close
        </button>
      </div>
    </div>
  </div>

  <!-- Load the script -->
  <script defer src="{{ url_for('static', filename='script.js') }}"></script>

  <!-- Tab switching and modal functionality -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Tab switching
      document.querySelectorAll('.nav-button').forEach(button => {
        button.addEventListener('click', () => {
          const tab = button.getAttribute('data-tab');
          
          // Hide all tabs
          document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.remove('active');
          });
          
          // Show selected tab
          document.getElementById(tab).classList.add('active');
          
          // Update nav button styling
          document.querySelectorAll('.nav-button').forEach(btn => {
            btn.classList.remove('active');
          });
          
          button.classList.add('active');
        });
      });

      // Default to overview tab
      document.querySelectorAll('.tab-content').forEach(tc => tc.classList.add('hidden'));
      document.getElementById('overview-tab').classList.remove('hidden');

      // Back to servers button
      document.getElementById('open-servers').addEventListener('click', () => {
        window.location.href = '/servers';
      });

      // Preview modal functionality
      const modal = document.getElementById('panel-preview');
      const closeButtons = [document.getElementById('close-preview'), document.getElementById('close-preview-btn')];
      
      closeButtons.forEach(btn => {
        if (btn) {
          btn.addEventListener('click', () => {
            modal.classList.add('hidden');
            modal.classList.remove('flex');
          });
        }
      });

      // Close modal when clicking outside
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.classList.add('hidden');
          modal.classList.remove('flex');
        }
      });

      // Preview panel button
      const previewBtn = document.getElementById('preview-panel');
      if (previewBtn) {
        previewBtn.addEventListener('click', () => {
          modal.classList.remove('hidden');
          modal.classList.add('flex');
        });
      }
    });
  </script>
</body>
</html>